;/*FB_PKG_DELIM*/

__d("WAWebProductCatalogDetailDrawerMenu.react",["fbt","WATypeUtils","WAWebBizGatingUtils","WAWebChatRefreshedIcon.react","WAWebCommonCartIconMenuBarItem.react","WAWebDropdown.react","WAWebDropdownItem.react","WAWebDropdownItemSeparator.react","WAWebInfoRefreshedIcon.react","WAWebMenuBar.react","WAWebThumbsDownRefreshedIcon.react","WDSIconIcLink.react","WDSIconIcMoreVert.react","react"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=r("react"));function c(e){var t=e.cartCount,n=e.catalogId,a=e.contactId,i=e.onCartClick,l=e.onProductLinkClick,c=e.onProductMoreInformation,d=e.onReportProduct,m=e.onSendProduct,p=i&&n!=null?u.jsx(r("WAWebCommonCartIconMenuBarItem.react"),{cartCountText:o("WATypeUtils").isNumber(t)&&t>0?t.toString():void 0,onClick:i,catalogOwnerJid:n}):null;return[p,u.jsx(o("WAWebMenuBar.react").MenuBarItem,{testid:void 0,icon:u.jsx(r("WDSIconIcLink.react"),{testid:void 0}),title:s._(/*BTDS*/"Product link"),onClick:l},"link"),u.jsx(o("WAWebMenuBar.react").MenuBarItem,{testid:void 0,icon:u.jsx(r("WDSIconIcMoreVert.react"),{}),title:s._(/*BTDS*/"Menu"),dropdownMenu:{menu:u.jsxs(u.Fragment,{children:[u.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:m,icon:u.jsx(o("WAWebChatRefreshedIcon.react").ChatRefreshedIcon,{}),children:s._(/*BTDS*/"Send product")}),o("WAWebBizGatingUtils").canSeeECommerceComplianceIndiaSoftEnforcement(a)&&u.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:c,icon:u.jsx(o("WAWebInfoRefreshedIcon.react").InfoRefreshedIcon,{}),children:s._(/*BTDS*/"More information")}),u.jsx(r("WAWebDropdownItemSeparator.react"),{}),u.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:d,icon:u.jsx(o("WAWebThumbsDownRefreshedIcon.react").ThumbsDownRefreshedIcon,{}),children:s._(/*BTDS*/"Report product")})]}),type:o("WAWebDropdown.react").MenuType.DropdownMenu,dirX:o("WAWebDropdown.react").DirX.LEFT,flipOnRTL:!0}},"dropdown")]}l.getDetailDrawerMenu=c}),226);
__d("WAWebProductCatalogProductPostcodeChangeBanner",["fbt","WALogger","WAWebBusinessDirectConnectionCollection","WAWebClickableLink.react","WAWebModalManager","WAWebProductCollectionCatalogPostcodeChangeModal","asyncToGeneratorRuntime","react","useBoolean","useWAWebModelValues","useWAWebUnmountSignal","vulture"],(function(t,n,r,o,a,i,l,s){var e,u,c,d=c||(c=o("react")),m=u||(u=r("react")),p=d.useEffect,_=d.useState;function f(e){var t=e.postcode,n=e.catalogWid,a=e.postcodeChangeSuccess;r("vulture")("rTXq1nkKsRPidRYfvGGAQTp-0N4=");var i=function(){o("WAWebModalManager").ModalManager.open(m.jsx(r("WAWebProductCollectionCatalogPostcodeChangeModal"),{existingPostcode:t,catalogId:n,onCancel:o("WAWebModalManager").closeModalManager,onSuccess:function(){o("WAWebModalManager").ModalManager.close(),a()}}))};return m.jsx(r("WAWebClickableLink.react"),{onClick:i,children:s._(/*BTDS*/"Change")})}f.displayName=f.name+" [from "+i.id+"]";function g(e){var t=e.businessDirectConnection,n=e.catalogWid,a=e.postcodeChangeSuccess;r("vulture")("NWZLY-Rha4wcV7i4WRRd5Q8-uCE=");var i=o("useWAWebModelValues").useModelValues(t,["postcode"]),l=i.postcode;return l==null?null:m.jsxs(m.Fragment,{children:[s._(/*BTDS*/"Not available in {area-postcode}.",[s._param("area-postcode",l)]),"\xA0",m.jsx(f,{postcode:l,catalogWid:n,postcodeChangeSuccess:a})]})}g.displayName=g.name+" [from "+i.id+"]";function h(t){r("vulture")("ARk_zMsOVUKLGZzSCD0L_VSqzOw=");var a=t.catalogWid,i=t.postcodeChangeSuccess,l=_(null),s=l[0],u=l[1],c=r("useBoolean")(!0),d=c.set,f=c.value,h=r("useWAWebUnmountSignal")();return p(function(){var t=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var t=yield r("WAWebBusinessDirectConnectionCollection").getCypher(a);if(h.aborted)return;u(t)}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] Setting cypher failed in PDP ",""])),t).verbose().sendLogs("direct-connection-setting-cypher-failed-in-pdp")}h.aborted||d(!1)});return function(){return t.apply(this,arguments)}})();t()},[a,d,h]),f||s==null?null:m.jsx(g,{businessDirectConnection:s,catalogWid:a,postcodeChangeSuccess:i})}h.displayName=h.name+" [from "+i.id+"]",l.default=h}),226);
__d("WAWebProductCatalogReportProductChoicePopup.react",["fbt","WAWebButton.react","WAWebKeyboardHotKeys.react","WAWebModal.react","WAWebUISpacing","react","stylex"],(function(t,n,r,o,a,i,l,s){var e=["ref"],u,c,d=u||(u=r("react"));function m(t){var n=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),i=a.onPopupCancel,l=a.onReport,u=s._(/*BTDS*/"Report this product?"),m=d.jsx("div",{children:s._(/*BTDS*/"We will review the product and if it does not meet our guidelines, it will be removed.")},"ReportProductChoicePopup-desc"),p=d.jsx(o("WAWebButton.react").Button,{testid:void 0,type:"secondary",onClick:l,children:s._(/*BTDS*/"Report product")},"ReportProductChoicePopup-reportBtn"),_=d.jsx(o("WAWebButton.react").Button,{type:"secondary",onClick:i,children:s._(/*BTDS*/"Cancel")},0),f={escape:i},g=d.jsxs("div",{className:"x78zum5 xdt5ytf",children:[d.jsx("div",babelHelpers.extends({},(c||(c=r("stylex"))).props(o("WAWebUISpacing").uiMargin.top4),{children:p})),d.jsx("div",babelHelpers.extends({},c.props(o("WAWebUISpacing").uiMargin.top4),{children:_}))]});return d.jsx(o("WAWebKeyboardHotKeys.react").HotKeys,{ref:n,handlers:f,children:d.jsx(o("WAWebModal.react").Modal,{title:u,actions:g,children:m})})}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),226);
__d("WAWebProductCatalogReportProductReasonPopup.react",["fbt","WAWebButton.react","WAWebKeyboardHotKeys.react","WAWebModal.react","WAWebRadio.react","WAWebToast.react","WAWebToastManager","react"],(function(t,n,r,o,a,i,l,s){var e=["ref"],u,c,d=c||(c=r("react")),m=(u||(u=o("react"))).useState,p={ILLEGAL:"ILLEGAL",KNOCKOFF:"KNOCKOFF",NO_MATCH:"NO_MATCH",OTHER:"OTHER",SCAM:"SCAM",SPAM:"SPAM"},_=[p.NO_MATCH,p.SPAM,p.ILLEGAL,p.SCAM,p.KNOCKOFF,p.OTHER];function f(t){var n=t.ref,r=babelHelpers.objectWithoutPropertiesLoose(t,e),a=r.onCancel,i=r.onTellUsMoreSubmit,l=m(null),u=l[0],c=l[1],p=function(){a==null||a()},f=function(t){c(t)},h=function(){o("WAWebToastManager").ToastManager.open(d.jsx(o("WAWebToast.react").Toast,{msg:s._(/*BTDS*/"Please select a reason.")}))},y=function(){if(u==null||!_.includes(u))return h();i(u)},C=s._(/*BTDS*/"Tell us more"),b=d.jsx("div",{className:"x78zum5",children:d.jsx("ul",{className:"x1n2onr6 x98rzlu",children:_.map(function(e){return d.jsx("li",{children:d.jsx(o("WAWebRadio.react").RadioWithLabel,{name:e,value:e,label:d.jsx(g,{reason:e}),checked:u===e,onChange:function(){return f(e)}})},"ReportProductReasonPopup-"+e+"-option")})})}),v=d.jsx(o("WAWebButton.react").Button,{testid:void 0,type:"primary",onClick:y,disabled:!u,children:s._(/*BTDS*/"Submit")},"ReportProductReasonPopup-submitButton"),S=d.jsx(o("WAWebButton.react").Button,{type:"secondary",testid:void 0,onClick:p,children:s._(/*BTDS*/"Cancel")},"ReportProductReasonPopup-cancelButton"),R={escape:p},L=d.jsxs("div",{className:"x78zum5 x1s70e7g",children:[S,v]});return d.jsx(o("WAWebKeyboardHotKeys.react").HotKeys,{ref:n,handlers:R,children:d.jsx(o("WAWebModal.react").Modal,{title:C,actions:L,children:b})})}f.displayName=f.name+" [from "+i.id+"]";function g(e){var t=e.reason;return t==="NO_MATCH"?s._(/*BTDS*/"The pictures or descriptions don't match the item"):t==="SPAM"?s._(/*BTDS*/"This is spam"):t==="ILLEGAL"?s._(/*BTDS*/"This is abusive, harmful or illegal"):t==="SCAM"?s._(/*BTDS*/"This is fraud or a scam"):t==="KNOCKOFF"?s._(/*BTDS*/"This appears to be a knockoff or counterfeit item"):t==="OTHER"?s._(/*BTDS*/"Other"):(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t)})()}g.displayName=g.name+" [from "+i.id+"]",l.default=f}),226);
__d("WAWebProductCatalogReportProductFlow",["fbt","$InternalEnum","WALogger","WAQplTypes","WAWebActionToast.react","WAWebBizProductCatalogAction","WAWebProductCatalogLogEvents","WAWebProductCatalogReportProductChoicePopup.react","WAWebProductCatalogReportProductReasonPopup.react","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebStateUtils","WAWebToastManager","react","useWAWebFlow"],(function(t,n,r,o,a,i,l,s){var e,u,c=u||(u=r("react")),d=n("$InternalEnum").Mirrored(["ReportProductChoice","TellUsMore"]);function m(t){var n=o("useWAWebFlow").useFlow(d.ReportProductChoice),a=n[0],i=n[1];if(i.step==null)return null;var l=function(n){var e=t.product;return o("WAWebBizProductCatalogAction").reportProduct(e.catalogWid,e.id.toString(),n)},u=function(){i.end()},m=function(r,a){a===void 0&&(a=o("WAWebActionToast.react").genId());var n=t.product,i=t.sessionId,d=l(r),p=new(o("WAWebActionToast.react")).ActionType(s._(/*BTDS*/"Reporting product")),_=d.then(function(){return o("WAWebProductCatalogLogEvents").logReportProductSuccess({product:o("WAWebStateUtils").unproxy(n),catalogSessionId:i,reason:r||""}),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PRODUCT_REPORT,o("WAQplTypes").QuickLogActionType.SUCCESS),new(o("WAWebActionToast.react")).ActionType(s._(/*BTDS*/"Thanks for your feedback").toString()+". "+s._(/*BTDS*/"Your report has now been submitted.").toString())}).catch(function(t){return o("WAWebProductCatalogLogEvents").logReportProductFailure({product:o("WAWebStateUtils").unproxy(n),catalogSessionId:i,reason:r||""}),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PRODUCT_REPORT,o("WAQplTypes").QuickLogActionType.FAIL),o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["error submitting product report"]))),new(o("WAWebActionToast.react")).ActionType(s._(/*BTDS*/"Couldn't report product"),{actionText:s._(/*BTDS*/"Retry"),actionHandler:function(){return m(r,a)}})});return o("WAWebToastManager").ToastManager.open(c.jsx(o("WAWebActionToast.react").ActionToast,{id:a,initialAction:p,pendingAction:_})),u(),d},p=function(){i.push(d.TellUsMore)},_=function(t){o("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PRODUCT_REPORT),m(t)},f=null;switch(i.step){case d.ReportProductChoice:f=c.jsx(r("WAWebProductCatalogReportProductChoicePopup.react"),{onReport:p,onPopupCancel:u,onCancel:u});break;case d.TellUsMore:f=c.jsx(r("WAWebProductCatalogReportProductReasonPopup.react"),{onTellUsMoreSubmit:_,onCancel:u});break}return c.jsx(a,{flow:i,children:f})}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),226);
__d("WAWebProductCatalogProductDetailsDrawer.react",["fbt","Promise","WAAbortError","WAFilteredCatch","WALogger","WAQplTypes","WATimeUtils","WAWebBackendErrors","WAWebBizGatingUtils","WAWebBizProductCatalogAction","WAWebBusinessProfileCollection","WAWebBusinessProfileUtils","WAWebCartCollection","WAWebCatalogCollection","WAWebCatalogLoadError.react","WAWebCatalogLoadErrorLoadable","WAWebChatThreadLogging","WAWebCmd","WAWebConfirmPopup.react","WAWebDirectConnectionGatingUtils","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerContext","WAWebDrawerHeader.react","WAWebFbtCommon","WAWebModalManager","WAWebNoop","WAWebProductCatalogCatalogDrawerSection.react","WAWebProductCatalogCheckCartEnabled","WAWebProductCatalogContext","WAWebProductCatalogDetailDrawerMenu.react","WAWebProductCatalogLogEvents","WAWebProductCatalogProductDetailsInfo.react","WAWebProductCatalogProductPostcodeChangeBanner","WAWebProductCatalogProductTile.react","WAWebProductCatalogReportProductFlow","WAWebProductCollection","WAWebProductDetailsInfoVariants.react","WAWebProductTypes.flow","WAWebSpinner.react","WAWebStateUtils","WAWebText.react","WAWebUISpacing","WAWebUserPrefsMeUser","WAWebUtilsLogQplEvents","react","stylex","useWAWebForceUpdate","useWAWebListener","useWAWebModelValues","useWAWebUnmountSignal"],(function(t,n,r,o,a,i,l,s){var e,u,c,d,m,p,_,f=["ref"],g,h,y,C,b=C||(C=o("react")),v=h||(h=r("react")),S=b.useContext,R=b.useEffect,L=b.useMemo,E=b.useState,k={surface:"catalog-item"},I={availabilityBanner:{display:"x78zum5",lineHeight:"x1fc57z9",backgroundColor:"x16w0wmm",$$css:!0},text:{fontWeight:"xk50ysn",$$css:!0},loadingText:{color:"xxr6tci",$$css:!0},loadingContainer:{position:"x10l6tqk",zIndex:"xa1v5g2",boxSizing:"x9f619",display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",width:"xh8yej3",background:"xsm26vf",boxShadow:"x1499u3w",opacity:"x1hc1fzr",transitionProperty:"xfagghw",transitionDuration:"xofcydl",transitionTimingFunction:"x9lcvmn",$$css:!0},shiftUp:{position:"x10l6tqk",zIndex:"xuvdrym",display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",width:"xh8yej3",background:"xsm26vf",boxShadow:"x1499u3w",transitionProperty:"xfagghw",transitionDuration:"x1wsgiic",transitionTimingFunction:"x9lcvmn",transform:"x1mbp4g0",$$css:!0},body:{flex:"x1okw0bk",$$css:!0}};function T(e){var t=e.isAvailable,n=e.productCatalogFetchState,a=e.productFetchState,i=e.productSanctioned,l;a==="ERROR"||a==="TOKEN_RECOVERY_REQUIRED"?l=v.jsx(o("WAWebText.react").WAWebTextSmall,{as:"span",xstyle:[I.text,o("WAWebUISpacing").uiMargin.horiz10],color:"critical",children:s._(/*BTDS*/"Something went wrong")}):t?l=[v.jsx(o("WAWebSpinner.react").Spinner,{size:14,color:"highlight"},"DetailDrawer-loadingBar-spinner"),v.jsx(o("WAWebText.react").WAWebTextSmall,{as:"span",xstyle:[I.text,o("WAWebUISpacing").uiMargin.horiz10,I.loadingText],children:s._(/*BTDS*/"Waiting for network")},"DetailDrawer-loadingBar-msg")]:i===!0&&o("WAWebBizGatingUtils").isCountryOfOriginEnabled()?l=v.jsx(o("WAWebText.react").WAWebTextSmall,{as:"span",xstyle:[I.text,o("WAWebUISpacing").uiMargin.horiz10],color:"critical",children:s._(/*BTDS*/"This item has been removed and is no longer available for purchase.")}):l=v.jsx(o("WAWebText.react").WAWebTextSmall,{as:"span",xstyle:[I.text,o("WAWebUISpacing").uiMargin.horiz10],color:"critical",children:s._(/*BTDS*/"This product or service has been removed")});var u=a==="PENDING"||n==="PENDING",c=u||!t;return v.jsx("div",babelHelpers.extends({},(y||(y=r("stylex"))).props(c&&I.loadingContainer,!c&&I.shiftUp,c&&o("WAWebUISpacing").uiPadding.all8),{children:l}))}T.displayName=T.name+" [from "+i.id+"]";function D(e){var t=e.handleBack,n=e.menu;return v.jsx(o("WAWebDrawerHeader.react").DrawerHeader,{title:s._(/*BTDS*/"Details"),onBack:t,type:o("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL,menu:n})}D.displayName=D.name+" [from "+i.id+"]";function x(t){"use no forget";var a,i=t.ref,l=babelHelpers.objectWithoutPropertiesLoose(t,f),h=l.chat,C=l.collectionId,b=l.hideCatalogSection,x=l.hideDescription,$=l.hideHeader,P=l.hideMessageBusinessButton,N=l.onBack,M=l.onCartClick,w=l.onProductCatalog,A=l.onProductDetail,F=l.onProductLinkClick,O=l.onProductMoreInformation,B=l.refreshCarousel,W=o("useWAWebForceUpdate").useForceUpdateDONOTUSE(),q=r("useWAWebUnmountSignal")(),U=S(o("WAWebDrawerContext").DrawerContext),V=E(l.product),H=V[0],G=V[1],z=o("useWAWebModelValues").useModelValues(H,["id","catalogWid","productImageCollection","fetchedFromServer","name","availability","reviewStatus","isSanctioned","variantInfo"]),j=E(null),K=j[0],Q=j[1],X=E(!1),Y=X[0],J=X[1],Z=E(null),ee=Z[0],te=Z[1],ne=E("NONE"),re=ne[0],oe=ne[1],ae=E("NONE"),ie=ae[0],le=ae[1],se=L(function(){return o("WAWebCartCollection").CartCollection.findCart(z.catalogWid.toString())},[z.catalogWid]);o("useWAWebListener").useListener(se,"change:cartItemCollection",W);var ue=function(){return N()},ce=function(){var t=z.catalogWid;o("WAWebCatalogCollection").CatalogCollection.findCarouselCatalog(t).then(function(e){if(!q.aborted){var t=Array.isArray(e)?e[0]:e;te(t||null),le(t?"SUCCESS":"NONE")}}).catch(o("WAFilteredCatch").filteredCatch(o("WAWebBackendErrors").ServerStatusCodeError,function(t){t.status==="not_found"||t.status===404?(te(null),le("NOT_FOUND")):(te(null),le("ERROR"),o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to fetch product catalog from server"]))))}))},de=function(t){var e,n=(e=o("WAWebCatalogCollection").CatalogCollection.get(z.catalogWid))==null?void 0:e.productCollection.get(t);n!=null?G(n):o("WAWebCatalogCollection").CatalogCollection.findProduct({catalogWid:z.catalogWid,productId:t.toString()}).then(function(e){var n=e[0],r=n==null?void 0:n.productCollection.get(t);r&&G(r)}).catch(function(e){o("WAWebProductDetailsInfoVariants.react").showProductChangeErrorToast()})},me=function(){o("WAWebModalManager").ModalManager.open(v.jsx(o("WAWebConfirmPopup.react").ConfirmPopup,{onOK:o("WAWebModalManager").closeModalManager,okText:r("WAWebFbtCommon")("OK"),children:s._(/*BTDS*/"This product or service has been removed")}))},pe=function(){var e=z.catalogWid,t=z.id.toString();return o("WAWebCatalogCollection").CatalogCollection.findProduct({catalogWid:e,productId:t,productMsgMediaData:o("WAWebStateUtils").unproxy(z).productMsgMediaData,canLogQpl:!0})},_e=function(){var e=z.catalogWid,t=pe(),a=o("WAWebBusinessProfileCollection").BusinessProfileCollection.find(e),i=!0;return(g||(g=n("Promise"))).all([a,t]).then(function(e){var t=e[0];if(q.aborted)throw new(o("WAAbortError")).AbortError;return i=!1,o("WAWebUtilsLogQplEvents").qplEndProductView(o("WAQplTypes").QuickLogActionType.SUCCESS),Q(t),oe("SUCCESS"),t}).then(function(e){le(function(t){if(t==="PENDING"){if(!o("WAWebBusinessProfileUtils").hasCatalog(e))return"NONE";ce()}return t})}).catch(o("WAAbortError").catchAbort(r("WAWebNoop"))).catch(o("WAFilteredCatch").filteredCatch(o("WAWebBackendErrors").E404,function(){ue(),me(),oe("NOT_FOUND"),i=!1,o("WAWebUtilsLogQplEvents").qplDropProductView()})).catch(o("WAFilteredCatch").filteredCatch(o("WAWebBackendErrors").CatalogUnknownError,function(e){oe("ERROR"),o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Failed to fetch product from server"])))})).catch(o("WAFilteredCatch").filteredCatch(o("WAWebBackendErrors").ServerStatusCodeError,function(e){oe("ERROR"),o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Failed to fetch product from server"])))})).catch(o("WAFilteredCatch").filteredCatch(o("WAWebBackendErrors").AdAccountRecoveryRequiredError,function(e){oe("TOKEN_RECOVERY_REQUIRED"),o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Failed to fetch product from server due to token recovery error"])))})).finally(function(){i&&o("WAWebUtilsLogQplEvents").qplEndProductView(o("WAQplTypes").QuickLogActionType.FAIL)})};R(function(){if(o("WAWebBizGatingUtils").commerceThreadsLoggingEnabled()&&h&&o("WAWebChatThreadLogging").handleActivitiesForChatThreadLogging([{activityType:"pdpViews",ts:o("WATimeUtils").unixTime(),chatId:h.id}]),B===!0){var e=o("WAWebCatalogCollection").CatalogCollection.get(z.catalogWid);e!=null&&e.productCollection&&e.fetchedFromServer?le("SUCCESS"):le("PENDING")}o("WAWebUtilsLogQplEvents").qplAnnotateProductView(o("WAWebUserPrefsMeUser").isMeUser(z.catalogWid));var t=z.catalogWid,n=z.id.toString();if(!t||!n){o("WAWebUtilsLogQplEvents").qplDropProductView();return}return _e().catch(function(){o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[product catalog] failed to fetch data"]))).sendLogs("product-catalog-failed-to-fetch-data")}),r("WAWebProductCatalogCheckCartEnabled")(t).then(function(e){J(e),o("WAWebProductCatalogLogEvents").logProductDetailView({product:o("WAWebStateUtils").unproxy(z),catalogContext:o("WAWebProductCatalogContext").getProductCatalogContext(U),cartToggle:e,collectionId:C})}).catch(function(){o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[product catalog] failed to check cart enabled"]))).sendLogs("product-catalog-failed-to-check-cart-enabled")}),function(){var e=z.catalogWid,t=z.id.toString();if(!(!e||!t)){var n=o("WAWebCatalogCollection").CatalogCollection.get(e),r=n&&n.msgProductCollection.get(t);r!=null&&r.fetchedFromServer&&n&&n.msgProductCollection.remove(r)}}},[]);var fe=function(){o("WAWebUtilsLogQplEvents").qplStartCartView("Product"),M==null||M(z.catalogWid.toString())},ge=function(){o("WAWebModalManager").ModalManager.open(v.jsx(r("WAWebProductCatalogReportProductFlow"),{product:z,sessionId:o("WAWebProductCatalogContext").getProductCatalogSessionId(U)}))},he=function(){o("WAWebProductCatalogLogEvents").logProductShareLinkClick({product:z,catalogContext:o("WAWebProductCatalogContext").getProductCatalogContext(U)}),F(z)},ye=function(t,n){n===void 0&&(n=!0),o("WAWebBizGatingUtils").commerceThreadsLoggingEnabled()&&h&&o("WAWebChatThreadLogging").handleActivitiesForChatThreadLogging([{activityType:t,ts:o("WATimeUtils").unixTime(),chatId:h.id,boolValue:n}])},Ce=function(){var e=o("WAWebCatalogCollection").CatalogCollection.get(z.catalogWid);o("WAWebBizProductCatalogAction").sendProductToChat(z,e,o("WAWebProductCatalogContext").getProductCatalogContext(U)),ye("isCtaOnPdpClicked"),o("WAWebProductCatalogLogEvents").logProductMessageBusinessClick(z,o("WAWebProductCatalogContext").getProductCatalogContext(U))},be=function(){ye("isCartAddClicked")},ve=function(){var e=z,t=e.catalogWid,n=o("WAWebCatalogCollection").CatalogCollection.get(t);if(n){var r=n.productCollection.get(e.id);o("WAWebCmd").Cmd.attachProduct({product:r?o("WAWebStateUtils").unproxy(r):o("WAWebStateUtils").unproxy(e)})}},Se=function(){O(z)},Re=function(){w&&w(z.catalogWid,o("WAWebProductCatalogContext").getProductCatalogContext(U))},Le=function(t){if(o("WAWebUtilsLogQplEvents").qplStartProductView("Product"),A)return A(t)},Ee=function(){var e=z.reviewStatus;return e===o("WAWebProductCollection").PRODUCT_REVIEW_STATUS.REJECTED},ke=function(){return re!=="ERROR"&&re!=="NOT_FOUND"&&!Ee()&&z.isSanctioned!==!0},Ie=ke(),Te=o("WAWebBusinessProfileUtils").hasCatalog(K)&&!b,De=function(){pe().then(function(){var e=o("WAWebCatalogCollection").CatalogCollection.get(z.catalogWid);e&&(e.stale=!0)}).catch(function(){o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[product catalog] failed to fetch product after postcode change"]))).sendLogs("product-catalog-failed-to-fetch-product-after-postcode-change")})},xe=function(){return o("WAWebProductTypes.flow").PRODUCT_AVAILABILITY_UNAVAILABLE_VALUES.includes(z.availability)?v.jsxs("div",babelHelpers.extends({},(y||(y=r("stylex"))).props([I.availabilityBanner,o("WAWebUISpacing").uiPadding.vert18,o("WAWebUISpacing").uiPadding.horiz30,o("WAWebUISpacing").uiMargin.bottom0]),{children:[z.availability===o("WAWebProductTypes.flow").ProductAvailability.OUT_OF_STOCK?s._(/*BTDS*/"This item is out of stock."):null,z.availability===o("WAWebProductTypes.flow").ProductAvailability.AVAILABLE_FOR_ANOTHER_POSTCODE&&o("WAWebDirectConnectionGatingUtils").enablePostcodeInCatalog()?v.jsx(r("WAWebProductCatalogProductPostcodeChangeBanner"),{catalogWid:z.catalogWid,postcodeChangeSuccess:De}):null]})):null},$e;return ke()&&($e=o("WAWebProductCatalogDetailDrawerMenu.react").getDetailDrawerMenu({onSendProduct:ve,onReportProduct:ge,onProductLinkClick:he,onProductMoreInformation:Se,onCartClick:Y?fe:void 0,cartCount:se.itemCount,catalogId:z.catalogWid.toString(),contactId:h==null?void 0:h.contact.id})),v.jsxs(r("WAWebDrawer.react"),{ref:i,onDrop:ue,theme:"striped",tsNavigationData:k,children:[!$&&v.jsx(D,{handleBack:ue,menu:$e}),v.jsx(r("WAWebDrawerBody.react"),{children:v.jsxs("div",babelHelpers.extends({"data-testid":void 0},(y||(y=r("stylex"))).props([I.body,o("WAWebUISpacing").uiPadding.bottom32]),{children:[v.jsx(T,{productFetchState:re,productCatalogFetchState:ie,isAvailable:Ie,productSanctioned:!!z.isSanctioned}),v.jsx(r("WAWebProductCatalogProductTile.react"),{product:z,isAvailable:Ie,fetching:re==="PENDING"}),xe(),re==="TOKEN_RECOVERY_REQUIRED"&&v.jsx("div",babelHelpers.extends({},(y||(y=r("stylex"))).props(o("WAWebUISpacing").uiMargin.top36),{children:v.jsx(o("WAWebCatalogLoadError.react").CatalogLoadError,{ctaDisplayType:o("WAWebCatalogLoadErrorLoadable").CTADisplayType.LINK,shouldShowHeader:!1})})),v.jsx(r("WAWebProductCatalogProductDetailsInfo.react"),{product:z,collectionId:C,onSendChat:Ce,onAddToCart:be,isAvailable:Ie,hideRetailerID:(a=l.chat)==null?void 0:a.contact.isEnterprise,onProductChange:de,hideMessageBusinessButton:P,hideDescription:x}),Te&&ee?v.jsx(r("WAWebProductCatalogCatalogDrawerSection.react"),{catalog:ee,onProductCatalog:Re,onProductDetail:Le,filterProductId:z.id.toString(),title:s._(/*BTDS*/"More"),animation:!1}):null]}))})]},"product-details-drawer")}x.displayName=x.name+" [from "+i.id+"]",l.default=x}),226);